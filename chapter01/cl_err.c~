#include <stdio.h>
/*
 * stdio.h:
 *   標準入出力ライブラリ。
 *   fprintf(), stderr を使用するために必要。
 *
 * stderr は標準エラー出力であり、
 * Usage 表示やエラーメッセージの出力先として適切。
 */

int main(int argc, char *argv[]){
   /*
    * argc (argument count):
    *   コマンドライン引数の個数。
    *
    *   実行ファイル名自身も 1 引数として数えられるため、
    *   ユーザーが指定する引数が 2 個の場合、
    *   argc は 3 になる。
    *
    *   想定している実行形式:
    *     cl_err f1 f2
    *       → argc == 3
    *
    * argv (argument vector):
    *   コマンドライン引数を表す文字列配列。
    *   本コードでは中身は使わず、
    *   「引数の個数」だけを検査している。
    */

   if(argc != 3){
       /*
        * 引数の個数が期待値と一致しない場合のエラー処理。
        *
        * argc != 3 となる例:
        *   - 引数が少ない
        *       cl_err f1        → argc == 2
        *   - 引数が多い
        *       cl_err f1 f2 f3  → argc == 4
        *
        * どちらも「正しい使い方ではない」と判断する。
        */

       fprintf(stderr, "Usage:cl_err f1 f2\n");
       /*
        * Usage メッセージ:
        *   正しいコマンドラインの使い方をユーザーに示す。
        *
        * stderr に出力する理由:
        *   - 正常出力(stdout)と分離できる
        *   - リダイレクト時にもエラーとして扱える
        */

       return 1;
       /*
        * return 1:
        *   プログラムが「異常終了」したことを OS に伝える。
        *
        * Linux/UNIX では、
        *   戻り値 0   → 正常終了
        *   戻り値 非0 → エラー終了
        *
        * シェルでは $? でこの値を確認できる。
        */
   }

   fprintf(stderr, "OK\n");
   /*
    * 引数の個数が正しい場合の処理。
    *
    * 本来はここで argv[1], argv[2] を使った
    * 実処理（ファイル操作など）が行われる想定。
    */

   return 0;
   /*
    * 正常終了。
    * OS に対して「問題なく処理が完了した」ことを通知する。
    */
}
